<!-- index.html  (allâ€‘inâ€‘one, now with bottomâ€‘left logo)  -->
<!DOCTYPE html>
<html lang="en">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8610559705757199"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Game Recommendations</title>
<script>
  /* Your base-64 stringâ€”replace with real encoded key */
  function _0x308d(_0x1b0ba9,_0x27829d){const _0x5055cf=_0x5055();return _0x308d=function(_0x308dcd,_0x1a085a){_0x308dcd=_0x308dcd-0x140;let _0x2a994a=_0x5055cf[_0x308dcd];return _0x2a994a;},_0x308d(_0x1b0ba9,_0x27829d);}const _0x3bfd06=_0x308d;(function(_0x3f8680,_0x53c880){const _0x3e139c=_0x308d,_0x3bbce8=_0x3f8680();while(!![]){try{const _0x2fadb6=parseInt(_0x3e139c(0x14c))/0x1+parseInt(_0x3e139c(0x148))/0x2+-parseInt(_0x3e139c(0x143))/0x3*(-parseInt(_0x3e139c(0x14b))/0x4)+parseInt(_0x3e139c(0x146))/0x5*(-parseInt(_0x3e139c(0x142))/0x6)+-parseInt(_0x3e139c(0x140))/0x7+parseInt(_0x3e139c(0x145))/0x8*(parseInt(_0x3e139c(0x144))/0x9)+-parseInt(_0x3e139c(0x14a))/0xa*(-parseInt(_0x3e139c(0x147))/0xb);if(_0x2fadb6===_0x53c880)break;else _0x3bbce8['push'](_0x3bbce8['shift']());}catch(_0x3282c8){_0x3bbce8['push'](_0x3bbce8['shift']());}}}(_0x5055,0xe909a));const B64='c2stcHJvai1EUGY0ZEIxTU5QRUw4MTNJMWR1LV83NzZEN0VUb0hPWmFYZjJHSENMY2g0VHdJN0l4Z09WUnc4cTExQXVQVmlqbHNNUG81WTVIMlQzQmxia0ZKT3JLMV9pV1RnU21IYWFUc05zSW84ZXNJYXVCMmR1Tk5kVkZPTjRxZXFvNzFyN3hSUkdOUjZ1aWdydVF1U2REYlhrTldINkpWSUE=';window['OPENAI_API_KEY']=atob(B64),window[_0x3bfd06(0x141)]=_0x3bfd06(0x149);function _0x5055(){const _0x54a28f=['OPENAI_MODEL','348CRNiLW','36mIgNlY','36LzwBUz','945704JNZsbH','117770aLzcgS','22iwLQZj','1059210XhajMH','gpt-3.5-turbo','9278130PQdoic','91304sZMHnk','11839eGXIyh','5762260PAwGOM'];_0x5055=function(){return _0x54a28f;};return _0x5055();}
</script>
<script type="module">
  /* ============ Configurations ===================================== */

  /* Firebase (unchanged) */
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-database.js";
  const firebaseConfig={  apiKey: "AIzaSyAnusAY5pd2uwEh5A3UUxMBg05FDRXkJwE",
  authDomain: "cat-nitro-game-recommendations.firebaseapp.com",
  databaseURL: "https://cat-nitro-game-recommendations-default-rtdb.firebaseio.com",
  projectId: "cat-nitro-game-recommendations",
  storageBucket: "cat-nitro-game-recommendations.firebasestorage.app",
  messagingSenderId: "967195242158",
  appId: "1:967195242158:web:3f170cca6d02b4457fc73f",
  measurementId: "G-K6R6RV0M7J"};

  const app=initializeApp(firebaseConfig);
  const db=getDatabase(app);

  window.pushToFirebase=(title)=>push(ref(db,'submissions'),{title,ts:Date.now()});
</script>


  <!-- ðŸ’…  Minimal inâ€‘page styles  -->
  <style>
    :root { --accent:#3b82f6; }
    *{box-sizing:border-box}
    body{margin:0;height:100vh;display:flex;justify-content:center;align-items:center;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;background:#232325}

    /* Search container */
    .search-wrapper{position:relative;width:min(90%,480px)}
    /* Rounded text bar */
    #searchInput{width:100%;padding:.9rem 1.15rem;font-size:1rem;border-radius:9999px;border:none;outline:none;box-shadow:0 4px 14px rgba(255, 255, 255, 0.1)}

    /* Suggestions dropdown */
    #suggestions{list-style:none;margin:0;padding:.25rem 0;position:absolute;top:100%;left:0;right:0;max-height:260px;overflow-y:auto;background:#ffffff;border-radius:1rem;box-shadow:0 8px 20px rgba(0,0,0,.08);display:none;z-index:10;font-size:.95rem}
    #suggestions li{padding:.6rem 1rem;cursor:pointer}
    #suggestions li:hover{background:#f1f5f9}
    #suggestions li.heading{font-size:.7rem;font-weight:600;text-transform:uppercase;background:#f9fafb;cursor:default}
    #suggestions li.disabled{color:#9ca3af;pointer-events:none}
    #suggestions .match{color:var(--accent);font-weight:600}

    /* Top banner */
    #banner{position:fixed;top:-100px;left:50%;transform:translateX(-50%);padding:.75rem 1.5rem;border-radius:0 0 1rem 1rem;font-weight:500;transition:top .35s ease;z-index:50;text-align:center}
    #banner.success{background:#ecfdf5;color:#059669}
    #banner.warn{background:#fefce8;color:#b45309}
    #banner.error{background:#fef2f2;color:#b91c1c}
    #banner.info{background:#e0f2fe;color:#0369a1}
    #banner a{text-decoration:underline;margin-left:.25rem}

    /* ðŸ”°  Bottomâ€‘left logo  */
    #siteLogo{
      position:fixed;bottom:20px;left:20px;z-index:40;
      /* responsive size: between 120â€¯px and 250â€¯px, 18â€¯vw is midâ€‘sized desktop */
      width:clamp(120px,18vw,250px);
      height:auto;user-select:none;pointer-events:none;
    }

    #pageTitle{
      margin:0 0 1.25rem 0;
      font-size:1.65rem;
      font-weight:700;
      color:#ffffff;
      line-height:1.15;
    }
  </style>
</head>
<body>
  <!-- Feedback banner -->
  <div id="banner"></div>
  <!-- ðŸ”  Search widget (title + input) -->
  <div class="search-wrapper">
    <center><h1 id="pageTitle">Catâ€‘Nitro Game Recommendations</h1></center>
    <form id="searchForm" autocomplete="off">
      <input type="text" id="searchInput" placeholder="Submit A Game!" />
    </form>
    <ul id="suggestions"></ul>
  </div>

  <!-- ðŸ·ï¸  Bottomâ€‘left logo (replace src with your file) -->
  <img id="siteLogo" src="/assets/img/developed-by-cat_nitro-team1.png" alt="Watermark: Developed by the cat-nitro team. Fun For All." />

  <!-- ðŸ§   Core logic  -->
  <script>
  /************ 1. Data ************/
  const ALL_GAMES = [
    "1v1lol","10 Minutes Till Dawn","99 Balls","100 Player Pong","2048","Achievement Unlocked","A Dark Room","Ages Of Conflict","Amazing Rope Police","Arcade Wizard","Avalanche","Awesome Tanks 2","Backrooms","Baldis Basics","Baldis Basics Camping","Basket Random","Bitlife","Boxing Random","Burger And Frights","Chrome Dino","CirclO","City Car Stunt Master","Connect 3","Cookie Clicker","Core Ball","CrossyRoad","CS:GO Clicker","Cut the Rope","Cut the Rope Holiday","Cut the Rope Time Travel","Cubefield","Dante","Death Car IO","Deepest Sword","Death Run 3D","Doge Miner","Drangon VS Bricks","Drive Mad","Duck Life 1","Duck Life 4","Edge Surf","Epic Tower Defense","Evil Glitch","Evolution","Exo","Fair Squares","Flappy Bird","Flash Tetris","Fruit Ninja","Game Inside a Game","Geometry Dash (Scratch)","Getting Over It (Scratch)","Go Ball","Google Feud","Half Life 1","Helios","Hover Bot Arena","Hextris","House Of Hazards","Interactive Buddy","Jetpack Joyride","Just Fall","Kitchen Gun Game","Madalin Stunt Cars 3","Mario","Minecraft Classic","Mini-putt","Monkeh Mart","Monster Tracks","n-gon","Ninja Dash","Pacman 3D","Pandemic 2","Paper.io 2","Particle Clicker","Pixel Gun Survival","Polygon Fusion","Portal (Flash)","Retro Bowl","Rolly Vortex","Roof-Top Sniperz","Sand Game","Sandboxels","Santy Is Home","Scrap Metal","Slope","Snow Rider","Snowbattle","Soccer Random","Space Company","Space Garden","Stack","Station 141","Stick Duel Battle","Stickman Hook","Subway Surfers","Super Tic-Tac-Toe","Super Mario 64","Swerve","Tank Trouble 2","Tanuki Sunset","Temple Run 2","The Bowling Club","This Is The Only Level","Time Shooter 3: SWAT","Twitch Tetris","Unfair Mario","Volley Random","Wall Smash","Yohoho.io"
  ];
  const BLACKLIST = [...ALL_GAMES];

  /************ 2. DOM refs ************/
  const inputEl   = document.getElementById('searchInput');
  const formEl    = document.getElementById('searchForm');
  const sugListEl = document.getElementById('suggestions');
  const bannerEl  = document.getElementById('banner');

  /************ 3. Autocomplete ************/
  inputEl.addEventListener('input', () => renderAutocomplete(inputEl.value));
  document.addEventListener('click', e => {
    if (!e.target.closest('.search-wrapper')) sugListEl.style.display = 'none';
  });

  function highlight(text, query){
    const i = text.toLowerCase().indexOf(query.toLowerCase());
    if (i === -1) return text;
    return text.substring(0,i) + '<span class="match">' + text.substr(i, query.length) + '</span>' + text.substring(i+query.length);
  }

  function renderAutocomplete(query){
    const q = query.trim().toLowerCase();
    if(!q){sugListEl.style.display='none';return;}

    const blkMatches = BLACKLIST.filter(g=>g.toLowerCase().startsWith(q)).slice(0,10);
    const newMatches = ALL_GAMES.filter(g=>g.toLowerCase().startsWith(q) && !blkMatches.includes(g)).slice(0,10);

    const items = [];
    if(blkMatches.length){
      items.push('<li class="heading">Games Already Included</li>');
      blkMatches.forEach(t=>items.push('<li class="disabled">'+highlight(t,q)+'</li>'));
    }
    if(newMatches.length){
      items.push('<li class="heading">Suggestions</li>');
      newMatches.forEach(t=>items.push('<li>'+highlight(t,q)+'</li>'));
    }

    sugListEl.innerHTML = items.join('');
    sugListEl.style.display = items.length? 'block':'none';
  }

  sugListEl.addEventListener('click', e=>{
    const li = e.target.closest('li');
    if(!li || li.classList.contains('heading') || li.classList.contains('disabled')) return;
    inputEl.value = li.textContent;
    formEl.requestSubmit();
  });

  /************ 4. Form submission ************/
  formEl.addEventListener('submit', async e=>{
    e.preventDefault();
    const title = inputEl.value.trim();
    if(!title) return;

    // 4.1  Already on site?  ðŸ‘‰ reject locally
    if(BLACKLIST.some(g=>g.toLowerCase()===title.toLowerCase())){
      showBanner('"'+title+'" is already on the site.', 'info');
      console.log('[Filter] Skipped â€“ title already present');
      return;
    }

    // 4.2  GPT classification
    const verdict = await checkWithOpenAI(title);
    if(verdict==='OK'){
      showBanner('"'+title+'" accepted!', 'success');
      await window.pushToFirebase(title);
      inputEl.value='';
      renderAutocomplete('');
    }else if(['A','B','C'].includes(verdict)){
      const msgMap={A:'was flagged as spam.',B:'was deemed inappropriate.',C:"isn't feasible as a browser game."};
      showBanner('"'+title+'" '+msgMap[verdict]+' <a href="https://forms.gle/rLt9Vm1n9632ze2dA" target="_blank">Learn more</a>', verdict==='A'?'warn':'error');
    }else{
      // error fallback already handled inside checkWithOpenAI
    }
  });

  async function checkWithOpenAI(title){
  try{
    const res = await fetch('https://api.openai.com/v1/chat/completions',{
      method:'POST',
      headers:{
        'Content-Type':'application/json',
        'Authorization':`Bearer ${OPENAI_API_KEY}`
      },
      body:JSON.stringify({
        model: OPENAI_MODEL,
        temperature: 0,
        max_tokens: 2,                       // enough for â€œOKâ€ but still tiny
        messages:[
          {role:'system',content:'You are a strict classifier. Reply with **exactly** one of: A, B, C, OK.'},
          {role:'user',content:`Classify "${title}" using these rules:
A = spam
B = inappropriate (e.g. Hitler, explicit sexual terms)
C = unfeasible as a browser game (e.g. Fortnite, Minecraft, GTA V, Roblox, really any really popular PC based Game.)
OK = a legitimate browser-playable game title.

Answer with A, B, C, or OK only.`}
        ]
      })
    });

    const raw = (await res.json())
                  .choices?.[0]?.message?.content?.trim().toUpperCase();

    console.log('[GPT-Filter] request â†’', title, '\nverdict â†', raw);

    // Accept only the four EXACT strings.  Anything else is an error.
    return ['A','B','C','OK'].includes(raw) ? raw : 'ERR';
  }catch(err){
    console.error(err);
    showBanner('OpenAI request failed â€“ retry later.','error');
    return 'ERR';
  }
}

  /************ 5. UI helpers ************/
  function showBanner(text, type='success'){
    bannerEl.innerHTML=text;
    bannerEl.className=type;
    bannerEl.style.top='0';
    clearTimeout(showBanner._t);
    showBanner._t=setTimeout(()=>bannerEl.style.top='-100px',4000);
  }
  </script>